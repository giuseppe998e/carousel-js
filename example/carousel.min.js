/**
 * Copyright (C) 2020 Giuseppe Eletto
 * "Carousel.js" is free software: you can redistribute it and/or modify 
 * it under the terms of the GNU Lesser General Public License v3 (or later).
 * More at https://github.com/giuseppe998e/carousel-js
 */"use strict";const Carousel=function(e){const t={},n=(()=>{if("string"!=typeof e.container)throw'The "container" option must be an ID or class name!';return document.querySelector(e.container)})(),s=(()=>{if("string"!=typeof e.items)throw'The "items" option must be a class name!';return n.querySelectorAll(e.items)})(),r=(()=>"object"==typeof s&&s instanceof NodeList?s[0].className:null)(),o=(()=>{if(void 0!==e.controls){if("string"!=typeof e.controls)throw"Container controls found in DOM!";return n.querySelector(e.controls)}return!1})(),a=(()=>"object"==typeof o&&o instanceof Element?o.className:null)(),i=(()=>{if(void 0!==e.controlsText){if(!(e.controlsText instanceof Array))throw'The "controlsText" option must be an array!';return e.controlsText}return["<<",">>"]})(),c=(()=>{if(void 0!==e.autoplay){if("number"!=typeof e.autoplay)throw'The "autoplay" option must be a number!';return e.autoplay}return!1})(),l=()=>{const e=s.length,t=Math.floor((e-1)/2);return s.forEach((e,t)=>e.setAttribute("data-index",t)),s[t].classList.add(`${r}-selected`),1!=e&&(s[L(t-1,e)].classList.add(`${r}-previous`),s[L(t+1,e)].classList.add(`${r}-next`),!0)},u=(e,[t,n,s,o,a])=>{n.classList.remove(`${r}-previous`),t.classList.remove(`${r}-selected`),o.classList.remove(`${r}-next`),"next"==e?(t.classList.add(`${r}-previous`),o.classList.add(`${r}-selected`),a.classList.add(`${r}-next`)):"previous"==e?(s.classList.add(`${r}-previous`),n.classList.add(`${r}-selected`),t.classList.add(`${r}-next`)):console.log(`Carousel: setState() -> Direction unknown! (Value: ${e})`)},d=()=>{const e=s.length,t=n.querySelector(`.${r}-previous`),o=n.querySelector(`.${r}-selected`),a=n.querySelector(`.${r}-next`);let i=parseInt(t.getAttribute("data-index"));i=L(i-1,e);let c=parseInt(a.getAttribute("data-index"));c=L(c+1,e);const l=n.querySelector(`.${r}[data-index='${i}']`),u=n.querySelector(`.${r}[data-index='${c}']`);return[o,t,l,a,u]},p=()=>{c>0&&setInterval(()=>u("next",d()),c)},v=()=>{if(!o)return;const e=o.appendChild(document.createElement("button")),t=o.appendChild(document.createElement("button"));e.className=`${a}-previous`,t.className=`${a}-next`,e.insertAdjacentHTML("beforeend",i[0]),t.insertAdjacentHTML("beforeend",i[1]),e.addEventListener("click",()=>u("previous",d()),!1),t.addEventListener("click",()=>u("next",d()),!1)},f=()=>{let e=!1,t=0;n.addEventListener("mousedown",n=>{e=!1,t=n.pageX,n.preventDefault()},!1),n.addEventListener("mousemove",t=>{e=!0,t.preventDefault()},!1),n.addEventListener("mouseup",n=>{if(!e)return;const s=n.pageX-t;s<-30?u("next",d()):s>30&&u("previous",d()),n.preventDefault()},!1),n.addEventListener("wheel",e=>{u(e.deltaY>0?"next":"previous",d()),e.preventDefault()},!1)},m=()=>{let e=0;n.addEventListener("touchstart",t=>{e=t.changedTouches[0].pageX,t.preventDefault()},!1),n.addEventListener("touchmove",e=>e.preventDefault()),n.addEventListener("touchend",t=>{const n=t.changedTouches[0].pageX-e;u(n<0?"next":"previous",d()),t.preventDefault()},!1)},L=(e,t)=>(e%t+t)%t;if(t.previous=(()=>u("previous",d())),t.next=(()=>u("next",d())),l())return v(),f(),m(),p(),t};