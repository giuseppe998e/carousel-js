/**
 * Copyright (C) 2020 Giuseppe Eletto
 * "Carousel.js" is free software: you can redistribute it and/or modify 
 * it under the terms of the GNU Lesser General Public License v3 (or later).
 * More at https://github.com/giuseppe998e/carousel-js
 */"use strict";const Carousel=function(e){const t={},n=(()=>{if("string"!=typeof e.container)throw'The "container" option must be an ID or class name!';return document.querySelector(e.container)})(),r=(()=>{if("string"!=typeof e.items)throw'The "items" option must be a class name!';return n.querySelectorAll(e.items)})(),s=(()=>"object"==typeof r&&r instanceof NodeList?r[0].className:null)(),o=(()=>{if(void 0!==e.controls){if("string"!=typeof e.controls)throw"Container controls found in DOM!";return n.querySelector(e.controls)}return!1})(),a=(()=>"object"==typeof o&&o instanceof Element?o.className:null)(),i=(()=>{if(void 0!==e.controlsText){if(!(e.controlsText instanceof Array))throw'The "controlsText" option must be an array!';return e.controlsText}return["<<",">>"]})(),c=(()=>{if(void 0!==e.autoplay){if("number"!=typeof e.autoplay)throw'The "autoplay" option must be a number!';return e.autoplay}return!1})(),l=()=>{const e=r.length;return r.forEach((e,t)=>e.setAttribute("data-index",t)),r[0].classList.add(`${s}-selected`),1!=e&&(r[h(-1,e)].classList.add(`${s}-previous`),r[h(1,e)].classList.add(`${s}-next`),!0)},u=(e,[t,n,r,o,a])=>{n.classList.remove(`${s}-previous`),t.classList.remove(`${s}-selected`),o.classList.remove(`${s}-next`);let i=o,c="previous";e>0?a.classList.add(`${s}-next`):e<0&&(i=n,c="next",r.classList.add(`${s}-previous`)),i.classList.add(`${s}-selected`),t.classList.add(`${s}-${c}`)},d=()=>{const e=r.length,t=n.querySelector(`.${s}-previous`),o=n.querySelector(`.${s}-selected`),a=n.querySelector(`.${s}-next`);let i=parseInt(t.getAttribute("data-index"));i=h(i-1,e);let c=parseInt(a.getAttribute("data-index"));c=h(c+1,e);const l=n.querySelector(`.${s}[data-index='${i}']`),u=n.querySelector(`.${s}[data-index='${c}']`);return[o,t,l,a,u]},p=()=>{c>0&&setInterval(()=>u(1,d()),c)},v=()=>{if(!o)return;const e=o.appendChild(document.createElement("button")),t=o.appendChild(document.createElement("button"));e.className=`${a}-previous`,t.className=`${a}-next`,e.insertAdjacentHTML("beforeend",i[0]),t.insertAdjacentHTML("beforeend",i[1]),e.addEventListener("click",()=>u(-1,d()),!1),t.addEventListener("click",()=>u(1,d()),!1)},f=()=>{let e=!1,t=0;n.addEventListener("mousedown",n=>{e=!1,t=n.pageX,n.preventDefault()},!1),n.addEventListener("mousemove",t=>{e=!0,t.preventDefault()},!1),n.addEventListener("mouseup",n=>{if(!e)return;const r=n.pageX-t;u(-r,d()),n.preventDefault()},!1),n.addEventListener("wheel",e=>{u(e.deltaY,d()),e.preventDefault()},!1)},m=()=>{let e=0;n.addEventListener("touchstart",t=>{e=t.changedTouches[0].pageX,t.preventDefault()},!1),n.addEventListener("touchmove",e=>e.preventDefault()),n.addEventListener("touchend",t=>{const n=t.changedTouches[0].pageX-e;u(-n,d()),t.preventDefault()},!1)},h=(e,t)=>(e%t+t)%t;return t.previous=(()=>u(-1,d())),t.next=(()=>u(1,d())),l()&&(v(),f(),m(),p()),t};