/**
 * Copyright (C) 2020 Giuseppe Eletto
 * "Carousel.js" is free software: you can redistribute it and/or modify 
 * it under the terms of the GNU Lesser General Public License v3 (or later).
 * More at https://github.com/giuseppe998e/carousel-js
 */"use strict";const Carousel=function(e){const t=(()=>{if("string"!=typeof e.container)throw'The "container" option must be an ID or class name!';return document.querySelector(e.container)})(),n=(()=>{if("string"!=typeof e.items)throw'The "items" option must be a class name!';return t.querySelectorAll(e.items)})(),s=(()=>"object"==typeof n&&n instanceof NodeList?n[0].className:null)(),r=(()=>{if(void 0!==e.controls){if("string"!=typeof e.controls)throw"Container controls found in DOM!";return t.querySelector(e.controls)}return!1})(),o=(()=>"object"==typeof r&&r instanceof Element?r.className:null)(),a=(()=>{if(void 0!==e.controlsText){if(!(e.controlsText instanceof Array))throw'The "controlsText" option must be an array!';return e.controlsText}return["<<",">>"]})(),i=(()=>{if(void 0!==e.autoplay){if("number"!=typeof e.autoplay)throw'The "autoplay" option must be a number!';return e.autoplay}return!1})(),c=()=>{const e=n.length,t=Math.floor((e-1)/2);return n.forEach((e,t)=>e.setAttribute("data-index",t)),n[t].classList.add(`${s}-selected`),1!=e&&(n[m(t-1,e)].classList.add(`${s}-previous`),n[m(t+1,e)].classList.add(`${s}-next`),!0)},l=(e,[t,n,r,o,a])=>{n.classList.remove(`${s}-previous`),t.classList.remove(`${s}-selected`),o.classList.remove(`${s}-next`),"next"==e?(t.classList.add(`${s}-previous`),o.classList.add(`${s}-selected`),a.classList.add(`${s}-next`)):"previous"==e?(r.classList.add(`${s}-previous`),n.classList.add(`${s}-selected`),t.classList.add(`${s}-next`)):console.log(`Carousel: setState() -> Direction unknown! (Value: ${e})`)},u=()=>{const e=n.length,r=t.querySelector(`.${s}-previous`),o=t.querySelector(`.${s}-selected`),a=t.querySelector(`.${s}-next`);let i=parseInt(r.getAttribute("data-index"));i=m(i-1,e);let c=parseInt(a.getAttribute("data-index"));c=m(c+1,e);const l=t.querySelector(`.${s}[data-index='${i}']`),u=t.querySelector(`.${s}[data-index='${c}']`);return[o,r,l,a,u]},d=()=>{i>0&&setInterval(()=>l("next",u()),i)},p=()=>{if(!r)return;const e=r.appendChild(document.createElement("button")),t=r.appendChild(document.createElement("button"));e.className=`${o}-previous`,t.className=`${o}-next`,e.insertAdjacentHTML("beforeend",a[0]),t.insertAdjacentHTML("beforeend",a[1]),e.addEventListener("click",()=>l("previous",u()),!1),t.addEventListener("click",()=>l("next",u()),!1)},v=()=>{let e=!1,n=0;t.addEventListener("mousedown",t=>{e=!1,n=t.pageX,t.preventDefault()},!1),t.addEventListener("mousemove",t=>{e=!0,t.preventDefault()},!1),t.addEventListener("mouseup",t=>{if(!e)return;const s=t.pageX-n;s<-30?l("next",u()):s>30&&l("previous",u()),t.preventDefault()},!1),t.addEventListener("wheel",e=>{l(e.deltaY>0?"next":"previous",u()),e.preventDefault()},!1)},f=()=>{let e=0;t.addEventListener("touchstart",t=>{e=t.changedTouches[0].pageX,t.preventDefault()},!1),t.addEventListener("touchmove",e=>e.preventDefault()),t.addEventListener("touchend",t=>{const n=t.changedTouches[0].pageX-e;l(n<0?"next":"previous",u),t.preventDefault()},!1)},m=(e,t)=>(e%t+t)%t;c()&&(p(),v(),f(),d())};